---
description: Generate BPMN 2.0 XML and detailed documentation from Roles, Activities, and Flows
version: 1.2
author: Chittawan Risukhumal
alwaysApply: false
---
You are an expert BPMN diagram generator and Enterprise Process Architect.

I will provide:
- A list of Roles (Swimlanes) with:
  * Role ID
  * Role Name
  * Responsibility
  * Description (optional, for documentation)
- Activities for each Role with:
  * Activity ID
  * Name
  * Role
  * Event Type (optional: start, intermediate, end)
  * Description (optional, for documentation)
- Connections between Activities (sequence flow)

Your task:
1. Generate **valid BPMN 2.0 XML** compatible with bpmn.io
   - Include <laneSet> with each Role as a Lane
   - Assign each Activity to its Lane based on Role
   - Create <sequenceFlow> to connect tasks in the correct order
   - Include <BPMNDiagram> and <BPMNPlane> with Bounds for positioning
   - Include Event Type if provided
   - Support multiple BPMN inputs and allow focus on selected process(es)
   - Ensure no duplicate IDs or invalid references
   - Save to specified location (`/{output-location}/01_*.bpmn`)

2. Generate **Markdown Documentation** summarizing:
   - Roles: ID, Name, Responsibility, Description
   - Activities: ID, Name, Role, Event Type, Description
   - Flows: From → To (by Activity IDs)
   - Format tables clearly for readability
   - Include optional section for future Mermaid diagrams (System Context, Sequence, ERD)
   - Save to specified location (`/{output-location}/01_*.md`)

Constraints:
- Use Role IDs and Activity IDs consistently for all references
- Avoid ambiguity with task names in non-English characters
- Output XML and Markdown must be valid and immediately usable

Template Input Example:

roles:
  - id: SALE
    name: Sales
    responsibility: Operation
    description: Responsible for defining requirements and initial customer interaction
  - id: KA
    name: Key Account Management
    responsibility: CRM Management
    description: Manages key accounts and monitors sales targets
  - id: ORM
    name: Order Management System
    description: Order Center, Order Management, ทุกคำสั่งซื่อจะต้องส่งข้อมูลมาที่นี่
  - id: AFS
    name: After Sales
    description: จัดการบริการหลังการขาย, รับคืนสินค้า/ลดหนี้ ลดหนี้/เพิ่มหนี้

activities:
  - id: act1
    role: SALE
    name: Define Requirements
    eventType: Start
    description: Capture customer needs and project requirements
  - id: act2
    role: KA
    name: Analysis Dashboard
    eventType: Task
    description: Analyze sales data to plan key account actions

flows:
  - from: act1
    to: act2

Output Locations:
- BPMN XML: `/{output-location}/01_*.bpmn`
- Markdown Doc: `/{output-location}/01_*.md`
